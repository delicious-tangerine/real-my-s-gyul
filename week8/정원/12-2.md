# SQL 문장별로 사용하는 잠금

## SELECT 쿼리의 잠금

### SELECT FROM
별도의 잠금을 얻지 않는다.

### SELECT FROM LOCK IN SHARE MODE
WHERE 절에 일치하는 레코드뿐 아니라 검색을 위해 접근한 모든 레코드에 대해 공유 넥스트 키 락을 필요로 한다.

### SELECT FROM FOR UPDATE
WHERE 절에 일치하는 레코드뿐 아니라 검색을 위해 접근한 모든 레코드에 대해 배타적 넥스트 키 락을 필요로 한다.

## INSERT 쿼리의 잠금

### INSERT ...
기본적으로 배타적 레코드 잠금을 사용한다. 해당 테이블에 PK나 Unique Key가 존재 한다면 중복 체크를 위해 공유 레코드 잠금을 먼저 획득해야 한다.
<br>
인서트 인텐션 락이라는것을 이용하면 동시에 충돌되지 않는 값에 대해 INSERT 처리를 할 수 있다.

## UPDATE 쿼리의 잠금

### UPDATE WHERE
단순 UPDATE 문장은 WHERE 조건에 일치하는 레코드를 찾기 위해 참조한 모든 레코드에 배타적 넥스트 키 락을 걸게 된다.

## DELETE 쿼리의 잠금
배타적 넥스트 키 락을 거는데 마스터 슬레이브 동기화 유지를 위해 레코드 뿐 아니라 간격까지 잠근다.
