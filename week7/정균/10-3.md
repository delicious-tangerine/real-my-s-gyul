# `MySQL 파티션의 종류`

다른 DBMS와 마찬가지로 MySQL에서도 4가지 기본 파티셔닝 기법을 제공하고 있다. 

- 레인지 파티션

- 리스트 파티션

- 해시 파티션

- 키 파티션

<br> <br>

## `레인지 파티션`

파티션 키의 연속된 범위로 파티션을 정의하는 방법으로, 가장 일반적으로 사용되는 파티션 방법 중 하나이다. 

- 날짜를 기반으로 데이터가 누적되고 년도나 월 또는 일 단위로 분석하고 삭제해야 할 때

- 범위 기반으로 데이터를 여러 파티션에 균등하게 나눌 수 있을 때

- 파티션 키 위주로 검색이 자주 실행될 때

<br>

## `파티션 분리와 병합`

단순 파티션의 추가

```sql
ALTER TABLE employees ADD PARTITION (PARTITION p4 VALUES LESS THAN (2011));
```

employees 테이블에 입사 일자가 2001년부터 2010년 이하인 레코드를 저장하기 위한 새로운 파티션 p4를 ALTER TABLE 명령이다. 

<br>

단순 파티션 삭제

```sql
ALTER TABLE employees DRO PARTITION p0;
```

이것 외에 `기존 파티션의 분리`, `기존 파티션의 병합` 등등 있음.. 

<br> <br>

## `레인지 파티션 주의사항`

레인지 파티션에서 NULL은 어떤 값보다 작은 값으로 간주된다. 만약 employees 파티션 테이블에 hired 컬럼이 NULL인 레코드가 INSERT 된다면 이 레코드는 입사 일자가 가장 작은 값을 저장하는 p0 파티션으로 저장됩니다. 

<br> <br>

## `리스트 파티션`

리스트 파티션은 레인지 파티션과 매우 흡사하ㅔ 동장학. 둘의 가장 큰 차이는 레인지 파티션은 파티션 키 값의 연속된 값의 범위로 파티션을 구성할 수 있지만 리스트 파티션은 파티션 키 값 하나하나를 리스트로 나열해야 한다는 점!

- 파티션 키 값이 코드 값이나 카테고리와 같이 고정적일 때

- 키 값이 연속되지 않고 정렬 순서와 관계없이 파티션을 해야할 때

- 파티션 키 값을 기준으로 레코드의 건수가 균일하고, 검색 조건에 파티션 키가 자주 사용될 때

<br>

### 리스트 파티션 주의사항

- 명시되지 않은 나머지 값을 저장하는 MAXVALUE 파티션을 정의할 수 없다. 

- 레인지 파티션과는 달리 NULL을 저장하는 파티션을 별도로 생성할 수 있다. 

- MySQL 5.1 버전에서 파티션 키는 정수 타입의 컬럼 또는 정수 타입을 변환하는 표현식만 사용할 수 있지만 MySQL 5.5 이상 부터는 문자열 타입의 컬럼도 파티션 키로 사용할 수 있다. 

<br> <br>

## `파티션의 실행 계획`

파티션 테이블의 쿼리가 실행될 때 모든 파티션을 읽는지 아니면 일부의 파티션만 읽는지는 성능에 아주 큰 영향을 미친다. 쿼리의 실행 계획이 수립될 때 불필요한 파티션은 모두 배제하고 꼭 필요한 파티션만을 걸러내는 과정을 `파티션 프루닝`이라고 함!

`EXPLAIN PARTITIONS` 명령을 사용해야 함!