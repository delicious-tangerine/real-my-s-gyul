# `6.3 MySQL의 주요 처리 방식`

- 풀 테이블 스캔을 제외한 나머지는 모두 `스토리지 엔진`이 아니라 `MySQL 엔진`에서 처리되는 내용

- MySQL 엔진에서 부가적으로 처리하는 작업은 대부분 성능에 미치는 영향력이 큼

<br>

## `풀 테이블 스캔`

풀 테이블 스캔은 인덱스를 사용하지 않고 테이블의 데이터를 처음부터 끝까지 읽어서 요청된 작업을 처리하는 작업을 의미 

MySQL 옵티마이저는 다음과 같은 조건이 일치할 때 주로 풀 테이블 스캔을 선택함

- 테이블의 레코드 건수가 너무 작아서 인덱스를 통해 읽는 것보다 풀 테이블 스캔을 하는 편이 더 빠른 경우

- WHERE 절이나 ON 절에 인덱스를 이용할 수 있는 적절한 조건이 없는 경우

- 인덱스 레인지 스캔을 사용할 수 있는 쿼리라 하더라도 옵티마이저가 판단한 조건 일치 레코드 건수가 너무 많은 경우

<br>

## `ORDER BY 처리`

레코드 1~2건을 가져오는 쿼리를 제외하면 대부분의 SELECT 쿼리에서 정렬을 필수적으로 사용됨 (오..?)

<br>

### `소트 버퍼(Sort buffer)`

- MySQL은 정렬을 수행하기 위해 별도의 메모리 공간을 할당받아서 사용 -> 이 메모리 공간을 소트 버퍼 라고 함

- 소트 버퍼는 정렬이 필요한 경우에만 할당

<br>

### `정렬해야 할 레코드가 소트 버퍼로 할당된 공간보다 크다면 어떻게 될까?`

<img width="496" alt="스크린샷 2021-06-23 오전 11 44 08" src="https://user-images.githubusercontent.com/45676906/123027148-524cca80-d418-11eb-88fa-cce8a9f8332e.png">

- 보류 

<br>

## `Group By 처리`

- Group By에 사용된 조건은 인덱스를 사용해서 처리될 수 없으므로 HAVING 절을 튜닝하려고 인덱스를 생성하거나 다른 방법을 고민할 필요는 없다. 

<br>

## `Distinct 처리`

- 특정 칼럼의 유니크한 값만을 조회하려면 SELECT 쿼리에 Distinct를 사용함

- 집합 함수와 같이 Distinct가 사용되는 쿼리의 실행 계획에서 Distinct 처리가 인덱스를 사용하지 못할 때는 항상 임시 테이블이 필요함



