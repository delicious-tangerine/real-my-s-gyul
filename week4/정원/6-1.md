# 실행계획 개요

DBMS의 쿼리 실행은 같은 결과를 만들어 내는 데 한 가지 방법만 있는 것은 아니다. 많은 방법 중 어떤 방법이 최적이고, 최소의 비용이 소모될지 결정해야 한다. 쿼리를 최적으로 실행하기 위해 각 테이블의 데이터가 어떤 분포로 저장돼 있는지 통계 정보를 참조하며, 최적의 실행 계획을 수립하는 작업이 필요하다. DBMS에서는 옵티마이저가 이러한 기능을 담당한다.

## 쿼리 실행 절차
MySQL 서버의 쿼리 실행 절차는 크게 3가지로 나눈다.
1. SQL 문장을 파싱한다.
2. 파싱된 결과(파스트리)를 통해 어떤 테이블을 읽고 어떤 인덱스를 이용할지 선택 한다. (여기서 실행 계획이 만들어 진다!)
3. 두 번째 단계의 결과를 통해 스토리지 엔진으로부터 데이터를 가져온다.

## 옵티마이저의 종류
- 비용 기반 최적화 : 쿼리를 처리하기 위한 여러 가지 방법을 만들고, 각 단위 작업의 비용을 비교하여 실행계획 산출.
- 규칙 기반 최적화 : 테이블, 레코드 등을 고려 하지 않고 내장되어 있는 우선순위에 따라 실행 계획 수립. (오라클에서 많이 사용됐던 규칙)

## 통계 정보
기본적으로 MySQL에서 관리되는 통계 정보는 대략의 레코드 건수와 인덱스의 유니크한 값의 개수 정도가 전부다. 통계 정보는 동적으로 변경 되지만 레코드 건수가 많지 않으면 부정확한 경우가 많으므로 "ANALYZE" 명령을 이용해 강제적으로 통계 정보를 생신해야 할 때도 있다.